<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Story Settings</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!-- CSS added by filter 'toc-css.lua' for TOC hovering to the side -->
  <!-- TODO: try doing sometthing in px instead of cm to make it more device independent -->
  <style>
  body {
    padding-left: 1.5cm;
    padding-right: 1cm;
    transition: 0.5s;
  }
  nav {
    width: 1cm;
    margin-left: -1.5cm;
    font-size: smaller;
    color: grey;
    transition: 0.5s;
    float: left;
    position: fixed;
    top: 0;
    bottom: 0;
    white-space: nowrap;
    overflow: hidden;
    overflow-y: scroll;
    transition: 0.5s;
    z-index: 10;
  }
  nav::-webkit-scrollbar {
    display: none;
  }
  nav a, nav a:visited {
    color: grey;
  }
  nav h2:before {
    content: "â‰¡ ";
    font-size: 150%;
  }
  nav h2:after {
    content: " â—‚";
  }
  nav li {
    margin-left: 1em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  nav li > a:not(:only-child):before {
    content: "â–¸ ";
  }
  nav li > a:only-child {
    margin-left: 0.75em;
  }
  nav li li {
    margin-left: 1em;
  }
  nav li li li {
    margin-left: 0.5em;
    font-size: smaller;
  }
  nav ul li ul  {
    visibility: hidden;
    display: none;
    margin-top: 0.2em;
    margin-bottom: 0.2em;
    transition: 0.5s;
  }
  .paddingleft {
    padding-left: 9cm;
    transition: 0.5s;
  }
  .navside {
    width: 7cm;
    margin-left: -8.5cm;
    padding-right: 1cm;
    transition: 0.5s;
  }
  .navside h2:after {
    content: " â–¸ ";
  }
  .navshown {
    width: 50%;
    transition: 0.5s;
    background-color: rgba(255, 255, 255, 0.95);
  }
  .subShow > ul {
    visibility: visible;
    display: block;
    transition: 0.5s;
    margin-left: -1em;
  }
  .subShow > a:not(:only-child):before {
    content: " â–¾ ";
  }

  .toc-invisible {
    visibility: hidden;
  }
  .navside > .toc-invisible {
    visibility: visible;
  }
  .navshown > .toc-invisible {
    visibility: visible;
  }
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Story Settings</h1>
</header>
<nav id="TOC" role="doc-toc">
<h2 id="toc-title">Contents</h2>
<ul>
<li><a href="#ai-model">AI Model</a>
<ul>
<li><a href="#ai-module">AI Module</a></li>
<li><a href="#storys-memory">Story's Memory</a></li>
<li><a href="#storys-authors-note">Story's Author's Note</a></li>
<li><a href="#lorebook-quick-access">Lorebook Quick Access</a></li>
<li><a href="#story-stats">Story Stats</a></li>
<li><a href="#exporting-the-story">Exporting the Story</a></li>
<li><a href="#screenshot-designer">Screenshot Designer</a></li>
</ul></li>
</ul>
</nav>
<p><img src="https://github.com/TapwaveZodiac/novelaiUKB/assets/35267604/25e7a750-baf8-415a-8f2d-1a29bab3e6bd" alt="image" /></p>
<p>This section of the interface controls settings <strong>specific to your currently active Story</strong>. There are three tabs here - <strong>Story</strong> and <strong>Advanced</strong> and <strong>Generation Settings</strong>. This page focuses on the first.</p>
<h2 id="ai-model">AI Model</h2>
<p>Allows you to choose between the following models:</p>
<ul>
<li><strong>Clio</strong>, a fine-tuned NAI-LM 3B model.</li>
<li><strong>Krake</strong>, a fine-tuned GPT-NeoX 20B model. (Only available on Opus.)</li>
<li><strong>Euterpe</strong>, a fine-tuned Fairseq GPT-13B model.</li>
<li><strong>Sigurd</strong>, a fine-tuned GPT-J 6B model.</li>
<li><strong>Calliope</strong>, the original fine-tuned 2.7B GPT-NEO model used in the Alpha.</li>
<li><strong>Snek</strong>, a fine-tuned GPT-J 6B model trained specifically for Python output.</li>
<li><strong>Genji</strong>, a fine-tuned GPT-J 6B model trained for Japanese output based on Japanese Light Novels.</li>
</ul>
<p>As a reminder, parameter count is <strong>not representative of quality</strong> - Clio has superior performance in spite of its lower parameter count.</p>
<h3 id="ai-module">AI Module</h3>
<p><strong>AI Modules</strong> are data modules that are inserted into the AI's memory in order to influence the text it will generate. These modules <strong>reduce the total context space by twenty tokens when in use</strong>, but are not tokens in themselves.</p>
<p>Each module is similar to a "mini-fine-tune", a corpus of text that was used to adjust the AI based on how it is written. Different modules have different effects, which depend on your own writing and the ideas, characters and scenarios you write about.</p>
<p>There are three types of modules: <strong>Style</strong>, <strong>Theme</strong> and <strong>Inspiration</strong>.</p>
<ul>
<li>Styles are based on multiple works from the same author.</li>
<li>Themes are based on multiple works, from multiple authors, but from the same genre.</li>
<li>Inspirations are based on a singular, specific work, from a single author.</li>
<li>Special are for specific occasions or have different purposes in mind than normal storywriting.</li>
</ul>
<p>Experiment to find what works best with what you enjoy and want to write about!</p>
<p>Further information on cleaning and preparing a dataset for use in training AI Modules can be found at the <a href="Datasetting-for-AI-Modules.html">Datasetting for AI Modules</a> section.</p>
<hr />
<h3 id="storys-memory">Story's Memory</h3>
<p>Injects this text at the top of the context. Helpful to keep the AI on track with important information to keep in mind, as well as the <strong>Author, Title, Tags, Genre</strong> setup. More information on how to use this can be found in the <a href="Context.html#injected-Text">Injected Text</a> section.</p>
<h3 id="storys-authors-note">Story's Author's Note</h3>
<p>Injects this text three newlines from the bottom of the context. Helpful for immediate instructions for the AI, which gives direction to the AI's generations. More information on how to use this can be found in the <a href="Context.html#injected-text">Injected Text</a> section.</p>
<h3 id="lorebook-quick-access">Lorebook Quick Access</h3>
<p>Enter an entry's name to find it quickly, or click the ðŸ“— icon to open the Lorebook window.</p>
<h3 id="story-stats">Story Stats</h3>
<p><img src="https://github.com/TapwaveZodiac/novelaiUKB/assets/35267604/6bdc6e93-1298-4dff-bb1c-dd38bc440f15" alt="image" /></p>
<p>The <em>Story Stats</em> menu allows you to consult several metrics such as the number of text characters, your use of retries, the size of your retry branches, etc. You may also prune your story in several ways in order to decrease its filesize.</p>
<ul>
<li><strong>Trim Story</strong>: Deletes all <em>redo steps</em>, leaving only the current path. You will not able to navigate the <em>Redo Tree</em> anymore, but the filesize of your story will be reduced.</li>
<li><strong>Flatten Story</strong>: More aggressive version of <em>Trimming.</em> Deletes all <strong>Undo</strong> steps and branches, leaving you with a single block of text.</li>
<li><strong>Reset to Prompt</strong>: Reverts your story back to the initial prompt it was started with, deleting everything else.</li>
</ul>
<h3 id="exporting-the-story">Exporting the Story</h3>
<p>You may export the story as:</p>
<ul>
<li><p>A <strong>Story file</strong>, which includes all branches and retries, and can be large if you haven't trimmed it first!</p></li>
<li><p>A <strong>Scenario file</strong>, which is flattened and ready to be imported with placeholders, if applicable.</p></li>
<li><p>A <strong>Plaintext file</strong> so it can simply be read on most devices.</p></li>
<li><p><strong>Copy the entire .story file to the clipboard</strong>, which can cause lag, this is a lot of data!</p></li>
<li><p>A <strong>Screenshot</strong> which can be customized to provide a showcase of NovelAI's abilities.</p></li>
</ul>
<h3 id="screenshot-designer">Screenshot Designer</h3>
<p><img src="https://github.com/TapwaveZodiac/novelaiUKB/assets/35267604/a8b9b93a-d9db-4902-859e-07e0cd4ab790" alt="image" /></p>
<p>The Screenshot Designer allows you to take a screenshot of the <strong>entire selected story text</strong>, and format it into a neat image that you can share freely.</p>
<p>The toggles do the following:</p>
<ul>
<li>Show Title: Shows the title of the story, along with "AN EXCERPT FROM"</li>
<li>Show Date: Show the date of the screenshot's creation.</li>
<li>Show Pen Name: Shows "by" followed by the pen name you have chosen in your settings.</li>
<li>Show NAI Logo: Shows the NovelAI logo and the site URL at the bottom.</li>
<li>Show Show Color Highlighting: Indicates the source of all tokens in the image according to your theme colors.</li>
<li>Show AI Model: Shows "Written Alongside" with the name and portrait of the selected model.</li>
<li>Show Background: Shows some background vector art.</li>
<li>Show Comment: If comments are present, they are displayed.</li>
</ul>
<p>You can select the font size, the width of the picture in pixels, as well as if you'd like to use NovelAI's default dark or light theme, or the one currently in use.</p>
<hr />
<!-- Javascript added by darkmode.lua to allow dark mode button -->
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<script>
  function addDarkmodeWidget() {
    const darkmode_options = {
      mixColor: '#fff', // default: '#fff'
      backgroundColor: '#fff',  // default: '#fff'
      buttonColorDark: '#100f2c',  // default: '#100f2c'
      buttonColorLight: '#fff', // default: '#fff'
      label: 'ðŸŒ“',
    }

    new Darkmode(darkmode_options).showWidget();
  }
  window.addEventListener('load', addDarkmodeWidget);
</script>


<!-- Javascript added by toc-css.lua to make TOC expandable on click -->
<script>

  const b = document.querySelector("body");
  const n = document.querySelector("nav");
  const buttonsize = 15;

  // click on "toc-title" to show TOC to the side
  document.querySelector("#toc-title").addEventListener("click", function(e) {
    if (e.clientX < e.currentTarget.getBoundingClientRect().left + buttonsize) {
      n.classList.toggle("navshown");
    } else {
      b.classList.toggle("paddingleft");
      n.classList.toggle("navside");
      n.classList.remove("navshown");
    };
  });

  // by default show TOC in large window
  window.onload = function() {
    if (window.innerWidth > 1000) {
      b.classList.add("paddingleft");
      n.classList.add("navside");
    };
  };

  // show/hide TOC on resize
  window.onresize = function () {
    // scrolling on mobile devices triggers resize, so we disable it altogether (for now)
    if (typeof window.orientation !== 'undefined') {
      return;
    };

    if (window.innerWidth > 1000) {
      b.classList.add("paddingleft");
      n.classList.add("navside");
    } else {
      b.classList.remove("paddingleft");
      n.classList.remove("navside");
    };
  };

  // show/hide subsections
  const allLis = document.querySelectorAll("nav li");

  for (const li of allLis) {
    li.addEventListener('click', function (e) {
      // show/hide subsection if arrow is clicked
      if (e.clientX < e.currentTarget.getBoundingClientRect().left + buttonsize
        && e.clientY < e.currentTarget.getBoundingClientRect().top + buttonsize) {

        li.classList.toggle('subShow');
        e.preventDefault();
      };

      // hide full nav if clicked outside
      if (e.currentTarget.getBoundingClientRect().left + 3*buttonsize < e.clientX) {
        n.classList.remove("navshown");
      };
    });

    li.classList.add('subShow');
  };

  // hide ToC if no overruling
  document.querySelector("nav ul").classList.add("toc-invisible");

  // show full nav on tab, hide full nav on escape
  document.addEventListener("keydown", function (e) {
    if (e.which === 27) {
      n.classList.remove("navshown");
      e.preventDefault();
    };
    if (e.which === 9) {
      n.classList.add("navshown");
      e.preventDefault();
    };
  });

  // insert key info
  n.insertAdjacentHTML("beforeend", "<span class='toc-invisible'> \
                                     <br/> \
                                     <p>Press <kbd>Tab</kbd> to show extended width TOC.</p> \
                                     <p>Presss <kbd>Esc</kbd> to go back to normal width.</p> \
                                     </span>");

  // hide full nav when clicked outside
  document.addEventListener("click", function(e) {
    if (n.classList.contains("navshown")) {
      if (!n.contains(e.target)) {
        n.classList.remove("navshown");
      };
    };
  });

</script>
</body>
</html>
